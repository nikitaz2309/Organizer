{"ast":null,"code":"var _jsxFileName = \"/Users/nikitos/Desktop/ALGORITM/ALL ABOUT REACT/ORGANIZER/bootcamp-m4-starter/src/pages/ListPage/ListPage.js\";\nimport React, { Component } from 'react';\nimport './ListPage.css';\n\nclass ListPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      movies: []\n    };\n\n    this.loadMovieById = async id => {\n      const response = await fetch(`http://www.omdbapi.com/?i=${id}&apikey=d1b7a5cd`);\n      const movie = await response.json();\n      return movie;\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    console.log(id);\n    fetch(`https://acb-api.algoritmika.org/api/movies/list/${id}`).then(resp => resp.json()).then(data => {\n      console.log(data);\n      this.setState({\n        title: data.title\n      });\n      const moviesPromises = data.movies.map(movieId => {\n        return this.loadMovieById(movieId);\n      });\n      return Promise.all(moviesPromises);\n    }).then(movies => {\n      console.log(movies);\n      this.setState({\n        movies: movies\n      });\n    }); // TODO: запрос к серверн на получение списка\n    // TODO: запросы к серверу по всем imdbID\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"list-page__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, this.state.title), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, this.state.movies.map(item => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: item.imdbID,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: `https://www.imdb.com/title/${item.imdbID}`,\n        target: \"_blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 33\n        }\n      }, item.Title, \" (\", item.Year, \")\"));\n    })));\n  }\n\n}\n\nexport default ListPage;","map":{"version":3,"sources":["/Users/nikitos/Desktop/ALGORITM/ALL ABOUT REACT/ORGANIZER/bootcamp-m4-starter/src/pages/ListPage/ListPage.js"],"names":["React","Component","ListPage","state","title","movies","loadMovieById","id","response","fetch","movie","json","componentDidMount","props","match","params","console","log","then","resp","data","setState","moviesPromises","map","movieId","Promise","all","render","item","imdbID","Title","Year"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,gBAAP;;AAEA,MAAMC,QAAN,SAAuBD,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAE7BE,KAF6B,GAErB;AACJC,MAAAA,KAAK,EAAE,EADH;AAEJC,MAAAA,MAAM,EAAE;AAFJ,KAFqB;;AAAA,SAO7BC,aAP6B,GAOb,MAAOC,EAAP,IAAc;AAC1B,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CACvB,6BAA4BF,EAAG,kBADR,CAA5B;AAGA,YAAMG,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAApB;AACA,aAAOD,KAAP;AACH,KAb4B;AAAA;;AAe7BE,EAAAA,iBAAiB,GAAG;AAChB,UAAML,EAAE,GAAG,KAAKM,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBR,EAAnC;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYV,EAAZ;AAEAE,IAAAA,KAAK,CAAE,mDAAkDF,EAAG,EAAvD,CAAL,CACCW,IADD,CACMC,IAAI,IAAIA,IAAI,CAACR,IAAL,EADd,EAECO,IAFD,CAEME,IAAI,IAAI;AACVJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACA,WAAKC,QAAL,CAAc;AACVjB,QAAAA,KAAK,EAAEgB,IAAI,CAAChB;AADF,OAAd;AAIA,YAAMkB,cAAc,GAAGF,IAAI,CAACf,MAAL,CAAYkB,GAAZ,CAAiBC,OAAD,IAAa;AAChD,eAAO,KAAKlB,aAAL,CAAmBkB,OAAnB,CAAP;AACH,OAFsB,CAAvB;AAIA,aAAOC,OAAO,CAACC,GAAR,CAAYJ,cAAZ,CAAP;AACH,KAbD,EAaGJ,IAbH,CAaSb,MAAD,IAAY;AAChBW,MAAAA,OAAO,CAACC,GAAR,CAAYZ,MAAZ;AACA,WAAKgB,QAAL,CAAc;AAAEhB,QAAAA,MAAM,EAAEA;AAAV,OAAd;AACH,KAhBD,EAJgB,CAqBhB;AACA;AACH;;AACDsB,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkC,KAAKxB,KAAL,CAAWC,KAA7C,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKD,KAAL,CAAWE,MAAX,CAAkBkB,GAAlB,CAAuBK,IAAD,IAAU;AAC7B,0BACI;AAAI,QAAA,GAAG,EAAEA,IAAI,CAACC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAG,QAAA,IAAI,EAAG,8BAA6BD,IAAI,CAACC,MAAO,EAAnD;AAAsD,QAAA,MAAM,EAAC,QAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAuED,IAAI,CAACE,KAA5E,QAAqFF,IAAI,CAACG,IAA1F,MADJ,CADJ;AAKH,KANA,CADL,CAFJ,CADJ;AAcH;;AAtD4B;;AAyDjC,eAAe7B,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport './ListPage.css';\n\nclass ListPage extends Component {\n    \n    state = {\n        title: '',\n        movies: []\n    }\n\n    loadMovieById = async (id) => {\n        const response = await fetch (\n            `http://www.omdbapi.com/?i=${id}&apikey=d1b7a5cd`\n        );\n        const movie = await response.json()\n        return movie;\n    };\n\n    componentDidMount() {\n        const id = this.props.match.params.id;\n        console.log(id);\n        \n        fetch(`https://acb-api.algoritmika.org/api/movies/list/${id}`)\n        .then(resp => resp.json())\n        .then(data => {\n            console.log(data)\n            this.setState({\n                title: data.title,\n            })\n\n            const moviesPromises = data.movies.map((movieId) => {\n                return this.loadMovieById(movieId)\n            })\n\n            return Promise.all(moviesPromises)\n        }).then((movies) => {\n            console.log(movies)\n            this.setState({ movies: movies })\n        })\n        // TODO: запрос к серверн на получение списка\n        // TODO: запросы к серверу по всем imdbID\n    }\n    render() { \n        return (\n            <div className=\"list-page\">\n                <h1 className=\"list-page__title\">{this.state.title}</h1>\n                <ul>\n                    {this.state.movies.map((item) => {\n                        return (\n                            <li key={item.imdbID}>\n                                <a href={`https://www.imdb.com/title/${item.imdbID}`} target=\"_blank\">{item.Title} ({item.Year})</a>\n                            </li>\n                        );\n                    })}\n                </ul>\n            </div>\n        );\n    }\n}\n \nexport default ListPage;"]},"metadata":{},"sourceType":"module"}